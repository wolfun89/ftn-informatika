{"ast":null,"code":"import ZavrsniAxios from '../apis/ZavrsniAxios';\nimport jwt_decode from \"jwt-decode\";\nexport const login = async function (username, password) {\n  const cred = {\n    username: username,\n    password: password\n  };\n  try {\n    const ret = await ZavrsniAxios.post('korisnici/auth', cred);\n    const jwt_decoded = jwt_decode(ret.data);\n    window.localStorage.setItem('jwt', ret.data);\n    window.localStorage.setItem('role', jwt_decoded.role.authority);\n    window.location.reload();\n    window.location.assign(\"/\");\n  } catch (err) {\n    alert(\"Neuspesan login\");\n    console.log(err);\n  }\n};\nexport const logout = function () {\n  window.localStorage.removeItem('jwt');\n  window.localStorage.removeItem('role');\n  window.location.reload();\n  window.location.assign(\"/\");\n};","map":{"version":3,"names":["ZavrsniAxios","jwt_decode","login","username","password","cred","ret","post","jwt_decoded","data","window","localStorage","setItem","role","authority","location","reload","assign","err","alert","console","log","logout","removeItem"],"sources":["C:/Users/Stefan/Desktop/JWD59StefanStojkovicFinalTest/jwd-front/zavrsni-app/src/services/auth.js"],"sourcesContent":["import ZavrsniAxios from '../apis/ZavrsniAxios'\r\nimport jwt_decode from \"jwt-decode\"\r\n\r\nexport const login = async function (username, password) {\r\n    const cred = {\r\n        username: username,\r\n        password: password\r\n    }\r\n\r\n    try {\r\n        const ret = await ZavrsniAxios.post('korisnici/auth', cred);\r\n        const jwt_decoded = jwt_decode(ret.data);\r\n        window.localStorage.setItem('jwt', ret.data);\r\n        window.localStorage.setItem('role', jwt_decoded.role.authority);\r\n        window.location.reload();\r\n        window.location.assign(\"/\");\r\n    } catch (err) {\r\n        alert(\"Neuspesan login\");\r\n        console.log(err);\r\n    }\r\n}\r\n\r\nexport const logout = function () {\r\n    window.localStorage.removeItem('jwt');\r\n    window.localStorage.removeItem('role');\r\n    window.location.reload();\r\n    window.location.assign(\"/\");\r\n}\r\n"],"mappings":"AAAA,OAAOA,YAAY,MAAM,sBAAsB;AAC/C,OAAOC,UAAU,MAAM,YAAY;AAEnC,OAAO,MAAMC,KAAK,GAAG,gBAAgBC,QAAQ,EAAEC,QAAQ,EAAE;EACrD,MAAMC,IAAI,GAAG;IACTF,QAAQ,EAAEA,QAAQ;IAClBC,QAAQ,EAAEA;EACd,CAAC;EAED,IAAI;IACA,MAAME,GAAG,GAAG,MAAMN,YAAY,CAACO,IAAI,CAAC,gBAAgB,EAAEF,IAAI,CAAC;IAC3D,MAAMG,WAAW,GAAGP,UAAU,CAACK,GAAG,CAACG,IAAI,CAAC;IACxCC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEN,GAAG,CAACG,IAAI,CAAC;IAC5CC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEJ,WAAW,CAACK,IAAI,CAACC,SAAS,CAAC;IAC/DJ,MAAM,CAACK,QAAQ,CAACC,MAAM,EAAE;IACxBN,MAAM,CAACK,QAAQ,CAACE,MAAM,CAAC,GAAG,CAAC;EAC/B,CAAC,CAAC,OAAOC,GAAG,EAAE;IACVC,KAAK,CAAC,iBAAiB,CAAC;IACxBC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;EACpB;AACJ,CAAC;AAED,OAAO,MAAMI,MAAM,GAAG,YAAY;EAC9BZ,MAAM,CAACC,YAAY,CAACY,UAAU,CAAC,KAAK,CAAC;EACrCb,MAAM,CAACC,YAAY,CAACY,UAAU,CAAC,MAAM,CAAC;EACtCb,MAAM,CAACK,QAAQ,CAACC,MAAM,EAAE;EACxBN,MAAM,CAACK,QAAQ,CAACE,MAAM,CAAC,GAAG,CAAC;AAC/B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}